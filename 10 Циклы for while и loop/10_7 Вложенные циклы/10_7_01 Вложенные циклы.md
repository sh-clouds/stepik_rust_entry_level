Вложенные циклы

Вложенные циклы могут показаться сложными для тех, кто только начал изучать программирование, но это всего лишь цикл внутри другого цикла. Обычно вложенные циклы используются для работы с многомерными данными. Все три цикла (for, while, loop) могут быть вложенными, однако наиболее распространённым из них является for. 

Рассмотрим самый простой пример вывода значений переменных цикла:

fn main() {
    println!("i j");
    // внешний цикл
    for i in 0..3 {
        // внутренний цикл
        for j in 0..3 {
            println!("{i} {j}");
        }
    }
}

Игровая площадка ⛱️

Результат

i j
0 0
0 1
0 2
1 0
1 1
1 2
2 0
2 1
2 2

Сначала своё выполнение начинает внешний цикл инициализируя i значением 0, далее запускается вложенный цикл, который инициализирует свою переменную j также 0. Однако внешний цикл перейдёт к следующей итерации, т.е. i станет 1 только когда вложенный цикл выполнит все 3 свои итерации, при этом на каждой итерации внешнего цикла внутренний цикл перезапускается. Другими словами, при i = 0, j = 0, 1, 2 далее, i = 1, j = 0, 1, 2 и i = 2, j = 0, 1, 2.



break и continue

Мы можем использовать выражения потока управления при работе с вложенными циклами. Важно помнить, что break и continue совершают управляющее воздействие только на цикл, в котором они объявлены:

Используем break после вывода, тем самым ограничив выполнение внутреннего цикла одной итерацией вместо трёх:

fn main() {
    println!("i j");
    for i in 0..3 {
        for j in 0..3 {
            println!("{i} {j}");
            break;
        }
    }
}

Результат

i j
0 0
1 0
2 0

 В случае continue добавим условие, которое пропустит вывод переменных при одинаковых значениях:

fn main() {
    println!("i j");
    for i in 0..3 {
        for j in 0..3 {
            if i == j {
                continue;
            }
            println!("{i} {j}");
        }
    }
}

Результат

i j
0 1
0 2
1 0
1 2
2 0
2 1



Переменная цикла как часть Range

Поскольку переменная цикла является также числом ничто не мешает использовать её как часть диапазона:

fn main() {
    println!("i j");
    for i in 0..3 {
        for j in i+1..3 {
            println!("{i} {j}");
        }
    }
}

Результат

i j
0 1
0 2
1 2