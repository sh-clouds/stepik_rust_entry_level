iPOW

Реализация функции возведения числа в степень может быть выполнена несколькими способами. Одним из наиболее известных и эффективных алгоритмов является алгоритм быстрого возведения в степень (exponentiation by squaring). Этот метод работает для целых и вещественных чисел. Алгоритм быстрого возведения в степень можно формализовать в следующем виде:

a^n= {
        1                if n==0
        1/(a^-n)         if n<0
        (a^(n/2))^2      if n>0 и n четное
        (a^((n-1)/2))*a  if n>0 и n нечетное
    }

В редакторе кода представлена неполная программа, которую необходимо доделать. Программа должна считывать вещественное число a и целое число n, а затем выводить (до 3 знаков) результат a^n.

Вычисление возведения в степень реализуйте в функции pow() !

Тестовые данные ✅

Sample Input:
1
0

Sample Output:
1.000

Напишите программу. Тестируется через stdin → stdout
Верно решили 30 учащихся
Из всех попыток 77% верны



use std::io;
use std::str::FromStr;

fn input<T: FromStr>() -> T 
where
    T::Err: std::fmt::Debug,
{
    let mut input = String::new();
    std::io::stdin()
        .read_line(&mut input)
        .expect("Failed to read input");
    input.trim().parse::<T>().expect("Failed to parse input")
}

fn main() {
    let a: f64 = input();
    let n: i32 = input();    
    //a = 0;    
    //n = 0;
    println!("{:.3}", pow(a, n));        
}

fn pow(base: f64, exp: i32) -> f64 {
    if exp == 0 {
        return 1.;
    }
    if exp < 0 {
        return 1. / base.powi(-exp);
    }
    if exp > 0 && exp % 2 == 0 {
        return (base.powi(exp / 2)) * (base.powi(exp / 2));
    } else {
        return (base.powi((exp - 1) / 2)) * (base.powi((exp - 1) / 2)) * base;
    }
}


