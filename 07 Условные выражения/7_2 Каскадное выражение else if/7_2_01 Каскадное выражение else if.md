Каскадное выражение else if

Для обработки нескольких условий в Rust существует каскадное выражение else if. Комбинируя if и else с else if, можно создавать несколько условий.

По сути, else if является вложенным if. Если присутствует более одного else if, то они выполняются по порядку до тех пор, пока условное выражение не будет true, после чего дальнейшая проверка условий прекращается. Ветка else при её наличии указывается за всеми ветками else if:

fn main() {
    let number = 6;

    if number % 4 == 0 {
        println!("Число {number} делится на 4");
    } else if number % 3 == 0 {
        println!("Число {number} делится на 3"); // Число 6 делится на 3
    } else if number % 2 == 0 {
        println!("Число {number} делится на 2");
    } else {
        println!("Число {number} не делится на 4, 3, и 2");
    }
}

Каждое условие проверяется по очереди до встречи первого истинного. Поэтому ветки ниже number % 3 == 0 будут пропущены. При этом переход к следующему условию осуществляется, только если предыдущее было ложным.

Так программа дойдёт до условия else if number % 2 == 0, только если else if number % 3 == 0 было ложным, а к нему если if number % 4 == 0 было ложным.



Наличие нескольких else if приводит к загромождению кода, а значит, возможно, стоит провести рефакторинг кода.


Вложенные условные выражения

Rust позволяет размещать выражения if внутри других условий, которое именуется вложением. Компилятор будет выполнять код иерархически, то есть он начнёт с внешнего if и будет двигаться внутрь. Для создания вложенного условия необходимо записать его внутри другого условия:

fn main() {
    let number = 5;

    if number < 10 {
        if number > 0 {
            println!("Число {number} меньше 10, но больше 0"); // "Число 5 меньше 10, но больше 0"
        } else {
            println!("Число {number} меньше 10, но не больше 0");
        }
    } else {
        if number > 15 {
            println!("Число {number} больше 15");
        } else {
            println!("Число {number} не больше 15");
        }
    }
}

Поскольку number = 5, внешнее условие if будет истинно, затем проверяется внутренний if и выполняется его блок кода, т.к. оно тоже истинно.

Попробуйте изменить значение переменной number с 5: a) на -1, b) на 11 и посмотрите, что выведет программа.

Игровая площадка ⛱️

Если у вас вложенность более 3 уровней, вам следует подумать о поиске другого метода. Возможно, у вас ошибка.