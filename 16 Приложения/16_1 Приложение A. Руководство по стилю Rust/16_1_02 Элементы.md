Элементы

Элементы (items) в Rust представляют собой компоненты, которые могут находиться на верхнем уровне модуля, то есть непосредственно внутри модуля, а не вложены в другие элементы, такие как функции, структуры и т.д. Однако Rust также позволяет некоторым элементам быть вложенными в элементы других типов, например, в функции. Правила форматирования остаются неизменными независимо от того, находится ли элемент на уровне модуля или внутри другого элемента.

Операторы use должны идти перед другими элементами.

// ok
use std::io;
const GI: f64 = 9.8

// nope
const GI: f64 = 9.8
use std::io;

                  

Определения функций

В Rust люди часто находят функции с помощью поиска fn [function-name], поэтому форматирование определений функций должно позволять это.

Правильный порядок и интервал:

[pub] [unsafe] [extern ["ABI"]] fn foo(arg1: i32, arg2: i32) -> i32 { ... }

                  
Избегайте комментариев внутри самой сигнатуры.

Если сигнатура функции не умещается в одной строке, то разбейте её после открывающей скобки и перед закрывающей скобкой и поместите каждый аргумент в отдельную строку с блочным отступом. Например,

fn foo(
    arg1: i32,
    arg2: i32,
) -> i32 {
    ...
}

                  
Обратите внимание на запятую в последнем аргументе.



Кортежи

Записывайте список типов, так же как и список параметров функции.

let y: (i32, f64, char) = (10, 20.0, 'a'); // ok

let y: (i32,
i32, i32) = (10, 20, 30); // nope

                  
Создавайте кортежи так же, как вы бы вызывали функцию:

Однострочная форма
let y = (11, 22, 33); // ok

let y = (11,22,33); // nope